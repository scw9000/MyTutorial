{"variants":[{"paths":["\/tutorials\/mytutorial\/tutorial2"],"traits":[{"interfaceLanguage":"swift"}]}],"schemaVersion":{"major":0,"minor":3,"patch":0},"sections":[{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"During launch, backgrounding and app resume, iOS will take a screenshot of your app for display whilst the app is fully loaded or backgrounded."}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"While this is assists in a seemingly uninterrupted app operation, the screenshots are not stored in a secure location."}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"In order to prevent this, you can hide your apps main window when you app becomes inactive and unhide it when your app resumes."}]}],"estimatedTimeInMinutes":20,"title":"App Privacy","image":"background.jpg","chapter":"App Privacy","kind":"hero","backgroundImage":"background.jpg"},{"kind":"tasks","tasks":[{"anchor":"Privacy-during-app-state-changes","title":"Privacy during app state changes","contentSection":[{"kind":"contentAndMedia","content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"For this exercise, click on the Project files link to download and use the attached project file (Awake16) as your starting point for this exercise."}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"A physical iOS device is not necessary for this exercise."}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"You’ll start by updating your AwakeApp main declaration to relay app state-change to other views in your app."}]}],"mediaPosition":"trailing"}],"stepsSection":[{"code":null,"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"On your Mac, open the Xcode project for “Awake1” - found in your Downloads folder."}]}],"caption":[],"type":"step","runtimePreview":null,"media":"tut4_image001.jpg"},{"code":null,"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Click Trust and Open when prompted."}]}],"caption":[],"type":"step","runtimePreview":null,"media":"tut4_image002.jpg"},{"code":"privacy_01.swift","content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Use the project navigator to open "},{"type":"strong","inlineContent":[{"type":"text","text":"AwakeApp.swift"}]},{"type":"text","text":"."}]}],"caption":[],"type":"step","runtimePreview":null,"media":null},{"code":"privacy_02.swift","content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Update the file using the snippet of code below (the changes are highlighted):"}]}],"caption":[],"type":"step","runtimePreview":null,"media":null},{"code":"privacy_03.swift","content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Next, open "},{"type":"strong","inlineContent":[{"type":"text","text":"ContentView.swift"}]}]}],"caption":[],"type":"step","runtimePreview":null,"media":null},{"code":"privacy_04.swift","content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Add the new environmentObject to the top."}]}],"caption":[],"type":"step","runtimePreview":null,"media":null},{"code":"privacy_05.swift","content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Update part of "},{"type":"strong","inlineContent":[{"type":"text","text":"ContentView.swift"}]},{"type":"text","text":" to make use of the newly added environmentObject ("},{"type":"strong","inlineContent":[{"type":"text","text":"blindsup"}]},{"type":"text","text":")."}]}],"caption":[],"type":"step","runtimePreview":null,"media":null},{"code":"privacy_06.swift","content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Add the following additional "},{"type":"strong","inlineContent":[{"type":"text","text":"Blinds"}]},{"type":"text","text":" view declaration to the end of "},{"type":"strong","inlineContent":[{"type":"text","text":"ContentView.swift"}]},{"type":"text","text":":"}]}],"caption":[],"type":"step","runtimePreview":null,"media":null},{"code":null,"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Select an iPhone 14 as the destination Simulator for this project."}]}],"caption":[],"type":"step","runtimePreview":null,"media":"tut4_image003.jpg"},{"code":null,"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Compile and run this project in Simulator."}]}],"caption":[],"type":"step","runtimePreview":null,"media":"tut4_image004.jpg"},{"code":null,"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Test this app by opening it and then slowly swiping up from the bottom of the device screen to access multi-tasking."}]}],"caption":[],"type":"step","runtimePreview":null,"media":"tut4_image005.jpg"},{"code":null,"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Examine the difference between this app’s item in the multi-tasking screen and other apps you have had running:"}]}],"caption":[],"type":"step","runtimePreview":null,"media":"tut4_image006.jpg"},{"code":null,"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"When done, stop tasks for this project."}]}],"caption":[],"type":"step","runtimePreview":null,"media":null}]}]}],"identifier":{"url":"doc:\/\/MyTutorial\/tutorials\/MyTutorial\/Tutorial2","interfaceLanguage":"swift"},"kind":"project","metadata":{"title":"App Privacy","categoryPathComponent":"MyTutorial","role":"project","category":"PretendCo Training"},"hierarchy":{"modules":[{"reference":"doc:\/\/MyTutorial\/tutorials\/MyTutorial\/Getting-Started","projects":[{"reference":"doc:\/\/MyTutorial\/tutorials\/MyTutorial\/Tutorial1","sections":[{"kind":"task","reference":"doc:\/\/MyTutorial\/tutorials\/MyTutorial\/Tutorial1#Get-the-student-materials"}]}]},{"reference":"doc:\/\/MyTutorial\/tutorials\/MyTutorial\/App-Privacy","projects":[{"reference":"doc:\/\/MyTutorial\/tutorials\/MyTutorial\/Tutorial2","sections":[{"kind":"task","reference":"doc:\/\/MyTutorial\/tutorials\/MyTutorial\/Tutorial2#Privacy-during-app-state-changes"}]}]}],"reference":"doc:\/\/MyTutorial\/tutorials\/MyTutorial","paths":[["doc:\/\/MyTutorial\/tutorials\/MyTutorial","doc:\/\/MyTutorial\/tutorials\/MyTutorial\/$volume","doc:\/\/MyTutorial\/tutorials\/MyTutorial\/App-Privacy"]]},"references":{"tut4_image004.jpg":{"alt":"<#accessible description#>","type":"image","identifier":"tut4_image004.jpg","variants":[{"url":"\/images\/tut4_image004.jpg","traits":["1x","light"]}]},"doc://MyTutorial/tutorials/MyTutorial/Tutorial1":{"role":"project","title":"Introduction","estimatedTime":"2min","abstract":[{"type":"text","text":"You’re invited to learn about secure app development in SwiftUI using Xcode. These tutorials will cover:"}],"identifier":"doc:\/\/MyTutorial\/tutorials\/MyTutorial\/Tutorial1","kind":"project","type":"topic","url":"\/tutorials\/mytutorial\/tutorial1"},"doc://MyTutorial/tutorials/MyTutorial":{"role":"overview","title":"Writing Secure Apps","abstract":[{"type":"text","text":"In these tutorials you will learn to add a few secure measures to your apps."}],"identifier":"doc:\/\/MyTutorial\/tutorials\/MyTutorial","kind":"overview","type":"topic","url":"\/tutorials\/mytutorial"},"tut4_image001.jpg":{"alt":"<#accessible description#>","type":"image","identifier":"tut4_image001.jpg","variants":[{"url":"\/images\/tut4_image001.jpg","traits":["1x","light"]}]},"doc://MyTutorial/tutorials/MyTutorial/Tutorial2":{"role":"project","title":"App Privacy","estimatedTime":"20min","abstract":[{"type":"text","text":"During launch, backgrounding and app resume, iOS will take a screenshot of your app for display whilst the app is fully loaded or backgrounded."}],"identifier":"doc:\/\/MyTutorial\/tutorials\/MyTutorial\/Tutorial2","kind":"project","type":"topic","url":"\/tutorials\/mytutorial\/tutorial2"},"tut4_image005.jpg":{"alt":"<#accessible description#>","type":"image","identifier":"tut4_image005.jpg","variants":[{"url":"\/images\/tut4_image005.jpg","traits":["1x","light"]}]},"tut4_image006.jpg":{"alt":"<#accessible description#>","type":"image","identifier":"tut4_image006.jpg","variants":[{"url":"\/images\/tut4_image006.jpg","traits":["1x","light"]}]},"tut4_image003.jpg":{"alt":"<#accessible description#>","type":"image","identifier":"tut4_image003.jpg","variants":[{"url":"\/images\/tut4_image003.jpg","traits":["1x","light"]}]},"tut4_image002.jpg":{"alt":"<#accessible description#>","type":"image","identifier":"tut4_image002.jpg","variants":[{"url":"\/images\/tut4_image002.jpg","traits":["1x","light"]}]},"background.jpg":{"alt":"Background image of people gathered around a computer.","type":"image","identifier":"background.jpg","variants":[{"url":"\/images\/background.jpg","traits":["1x","light"]}]},"privacy_01.swift":{"syntax":"swift","content":["import SwiftUI","","@main","struct AwakeApp: App {","    @StateObject private var store = CoffeeStore()","    var body: some Scene {","        WindowGroup {","            ContentView(store: store)","        }","    }","}"],"fileName":"AwakeApp.swift","identifier":"privacy_01.swift","type":"file","fileType":"swift","highlights":[]},"doc://MyTutorial/tutorials/MyTutorial/Getting-Started":{"role":"article","title":"Getting Started","abstract":[],"identifier":"doc:\/\/MyTutorial\/tutorials\/MyTutorial\/Getting-Started","kind":"article","type":"topic","url":"\/tutorials\/mytutorial\/getting-started"},"doc://MyTutorial/tutorials/MyTutorial/Tutorial2#Privacy-during-app-state-changes":{"role":"pseudoSymbol","title":"Privacy during app state changes","abstract":[{"type":"text","text":"During launch, backgrounding and app resume, iOS will take a screenshot of your app for display whilst the app is fully loaded or backgrounded."}],"identifier":"doc:\/\/MyTutorial\/tutorials\/MyTutorial\/Tutorial2#Privacy-during-app-state-changes","kind":"section","type":"section","url":"\/tutorials\/mytutorial\/tutorial2#Privacy-during-app-state-changes"},"privacy_06.swift":{"syntax":"swift","content":["import SwiftUI","","struct ContentView: View {","    @ObservedObject var store: CoffeeStore","    @EnvironmentObject var blindsup: BlindsStore","    ","    var body: some View {","        if blindsup.blindsup {","            Blinds()","        }","        else {","            NavigationView {","                List{","                    ForEach(store.coffees)  { coffee in","                        if coffee.isReady == \"Y\" {","                            OrderCompleteCell(coffee: coffee)","                        }","                        else {","                            OrderCell(coffee: coffee)","                        }","                    }","                    HStack {","                        Spacer()","                        Text(\"\\(store.coffees.count) coffee orders\")","                            .foregroundColor(.secondary)","                        Spacer()","                    }","                }","                .navigationTitle(\"Coffees\")","                .navigationBarItems(trailing: HStack {","                    AddButton(destination: NewCoffee(store: store)) } )","            }","            .onAppear(perform: {","                    self.fetchNewData()","            })","        }","    }","    ","    func loadOrders() {","        \/\/Coffee(name: \"Pat\", milk: \"Full\", sugar: 1, isReady: \"N\", price: 4.5, type: \"Flat White\", size: \"Large\", created: Date()),","        if let data = NSDictionary(contentsOfFile: dataFileURL().path),","            let orderarray = data[\"orders\"]! as? [[String: AnyObject]] {","            \/\/clear out old orders:","            store.coffees.removeAll(keepingCapacity: true)","            for anorder in orderarray {","                store.coffees.append(Coffee(name: anorder[\"name\"] as! String, milk: anorder[\"milk\"] as! String, sugar: anorder[\"sugar\"] as! Int, isReady: anorder[\"isReady\"] as! String, price: anorder[\"price\"] as! Double, type: anorder[\"type\"] as! String, size: anorder[\"size\"] as! String, created: anorder[\"tstamp\"] as! Date))","            }","        }","    }","","    func fetchNewData() {","        if let url = NSURL(string: \"https:\/\/consultants.apple.com\/au\/ttanz\/orders.plist\") {","            let session = URLSession(configuration: URLSessionConfiguration.ephemeral)","            let task = session.dataTask(with: url as URL, completionHandler: { (data, response, error) -> Void in","                if error != nil {","                    print(\"error: \\(error!.localizedDescription))\")","                }","                else if data != nil {","                    print(\"new download successful\")","                    if let data = data {","                        do {","                            try data.write(to: self.dataFileURL())","                            print(\"wrote file to dataFileURL\")","                            DispatchQueue.main.async {","                                self.loadOrders()","                            }","                        } catch { print(\"this did not work\") }","                    }","                    DispatchQueue.main.async { self.loadOrders() }","                }","            })","            task.resume()","        }","        else {","            print(\"Unable to create NSURL\")","        }","    }","    ","    func dataFileURL() -> URL {","        let fm = FileManager.default","        let localFilePath = fm.urls(for: .documentDirectory, in: .userDomainMask).first","        let fullPath = localFilePath?.appendingPathComponent(\"orders.plist\")","        ","        if !fm.fileExists(atPath: fullPath!.absoluteURL.path) {","            print(\"No downloaded orders.plist file found, so copying included bundle\")","            let bundledDataPath = Bundle.main.path(forResource: \"orders\", ofType: \"plist\")!","            try! fm.copyItem(atPath: bundledDataPath, toPath: (fullPath?.path)!)","        }","        return fullPath!","    }","}","","    ","struct OrderCell: View {","    var coffee: Coffee","    var body: some View {","        NavigationLink(destination: CoffeeDetail(coffee: coffee)) {","            HStack {","                Image(coffee.thumb)","                    .cornerRadius(8)","                    .padding(.init(top: 0, leading: -10, bottom: 0, trailing: 0))","                VStack(alignment: .leading) {","                    Text(coffee.name)","                    Text(coffee.size + \" \" + coffee.milk + \" milk \" + coffee.type)","                        .font(.subheadline)","                }","            }","        }","    }","}","","struct OrderCompleteCell: View {","    var coffee: Coffee","    var body: some View {","        NavigationLink(destination: CoffeeDetail(coffee: coffee)) {","            HStack {","                Image(coffee.thumb)","                    .cornerRadius(8)","                    .padding(.init(top: 0, leading: -10, bottom: 0, trailing: 0))","                VStack(alignment: .leading) {","                    Text(coffee.name)","                    Text(coffee.size + \" \" + coffee.milk + \" \" + coffee.type)","                        .font(.subheadline)","                }","                Spacer()","                Image(systemName: \"checkmark.rectangle.fill\")","                    .resizable()","                    .aspectRatio(contentMode: .fit)","                    .foregroundColor(.green)","                    .frame(width: 40.0, height: 30.0)","            }","        }.deleteDisabled(true)","    }","}","","struct ContentView_Previews: PreviewProvider {","    static var previews: some View {","        ContentView(store: testStore)","    }","}","","struct AddButton<Destination : View>: View {","    var destination:  Destination","    var body: some View {","        NavigationLink(destination: self.destination) {","            Image(systemName: \"plus.circle.fill\")","                .resizable()","                .aspectRatio(contentMode: .fit)","                .frame(width: 30.0, height: 30.0)","        }","    }","}","","struct Blinds: View {","    var body: some View {","        HStack {","            Spacer()","            VStack {","                Spacer()","                Image(systemName: \"eye.slash.fill\")","                    .resizable()","                    .aspectRatio(contentMode: .fit)","                    .foregroundColor(.blue)","                    .frame(width: 80.0, height: 80.0)","                    .padding()","                Spacer()","            }","            .background(Color.black)","            Spacer()","        }","        .background(Color.black)","        .edgesIgnoringSafeArea(.all)","    }","}"],"fileName":"ContentView.swift","identifier":"privacy_06.swift","type":"file","fileType":"swift","highlights":[{"line":153},{"line":154},{"line":155},{"line":156},{"line":157},{"line":158},{"line":159},{"line":160},{"line":161},{"line":162},{"line":163},{"line":164},{"line":165},{"line":166},{"line":167},{"line":168},{"line":169},{"line":170},{"line":171},{"line":172},{"line":173},{"line":174}]},"doc://MyTutorial/tutorials/MyTutorial/App-Privacy":{"role":"article","title":"App Privacy","abstract":[],"identifier":"doc:\/\/MyTutorial\/tutorials\/MyTutorial\/App-Privacy","kind":"article","type":"topic","url":"\/tutorials\/mytutorial\/app-privacy"},"privacy_02.swift":{"syntax":"swift","content":["import SwiftUI","","@main","struct AwakeApp: App {","    @StateObject private var store = CoffeeStore()","    @StateObject private var blindsup = BlindsStore()","    @Environment(\\.scenePhase) private var scenePhase","    ","    var body: some Scene {","        WindowGroup {","            ContentView(store: store)","            .environmentObject(blindsup)","        }","        .onChange(of: scenePhase) { phase in","            if phase == .active {","                blindsup.blindsup = false","            }","            if phase == .inactive {","                blindsup.blindsup = true","            }","        }","    }","}","class BlindsStore: ObservableObject {","    @Published var blindsup: Bool","","    init(blindsup: Bool = false) {","        self.blindsup = blindsup","    }","}","","struct BlindsUp {","    var blindsup: Bool","}"],"fileName":"AwakeApp.swift","identifier":"privacy_02.swift","type":"file","fileType":"swift","highlights":[{"line":6},{"line":7},{"line":8},{"line":12},{"line":14},{"line":15},{"line":16},{"line":17},{"line":18},{"line":19},{"line":20},{"line":21},{"line":24},{"line":25},{"line":26},{"line":27},{"line":28},{"line":29},{"line":30},{"line":31},{"line":32},{"line":33},{"line":34}]},"privacy_04.swift":{"syntax":"swift","content":["import SwiftUI","","struct ContentView: View {","    @ObservedObject var store: CoffeeStore","    @EnvironmentObject var blindsup: BlindsStore","    ","    var body: some View {","        NavigationView {","            List{","                ForEach(store.coffees)  { coffee in","                    if coffee.isReady == \"Y\" {","                        OrderCompleteCell(coffee: coffee)","                    }","                    else {","                        OrderCell(coffee: coffee)","                    }","                }","                HStack {","                    Spacer()","                    Text(\"\\(store.coffees.count) coffee orders\")","                        .foregroundColor(.secondary)","                    Spacer()","                }","            }","            .navigationTitle(\"Coffees\")","            .navigationBarItems(trailing: HStack { AddButton(destination: NewCoffee(store: store)) } )","        }","        .onAppear(perform: {","                self.fetchNewData()","        })","    }","    ","    func loadOrders() {","        \/\/Coffee(name: \"Pat\", milk: \"Full\", sugar: 1, isReady: \"N\", price: 4.5, type: \"Flat White\", size: \"Large\", created: Date()),","        if let data = NSDictionary(contentsOfFile: dataFileURL().path),","            let orderarray = data[\"orders\"]! as? [[String: AnyObject]] {","            \/\/clear out old orders:","            store.coffees.removeAll(keepingCapacity: true)","            for anorder in orderarray {","                store.coffees.append(Coffee(name: anorder[\"name\"] as! String, milk: anorder[\"milk\"] as! String, sugar: anorder[\"sugar\"] as! Int, isReady: anorder[\"isReady\"] as! String, price: anorder[\"price\"] as! Double, type: anorder[\"type\"] as! String, size: anorder[\"size\"] as! String, created: anorder[\"tstamp\"] as! Date))","            }","        }","    }","","    func fetchNewData() {","        if let url = NSURL(string: \"https:\/\/consultants.apple.com\/au\/ttanz\/orders.plist\") {","            let session = URLSession(configuration: URLSessionConfiguration.ephemeral)","            let task = session.dataTask(with: url as URL, completionHandler: { (data, response, error) -> Void in","                if error != nil {","                    print(\"error: \\(error!.localizedDescription))\")","                }","                else if data != nil {","                    print(\"new download successful\")","                    if let data = data {","                        do {","                            try data.write(to: self.dataFileURL())","                            print(\"wrote file to dataFileURL\")","                            DispatchQueue.main.async {","                                self.loadOrders()","                            }","                        } catch { print(\"this did not work\") }","                    }","                    DispatchQueue.main.async { self.loadOrders() }","                }","            })","            task.resume()","        }","        else {","            print(\"Unable to create NSURL\")","        }","    }","    ","    func dataFileURL() -> URL {","        let fm = FileManager.default","        let localFilePath = fm.urls(for: .documentDirectory, in: .userDomainMask).first","        let fullPath = localFilePath?.appendingPathComponent(\"orders.plist\")","        ","        if !fm.fileExists(atPath: fullPath!.absoluteURL.path) {","            print(\"No downloaded orders.plist file found, so copying included bundle\")","            let bundledDataPath = Bundle.main.path(forResource: \"orders\", ofType: \"plist\")!","            try! fm.copyItem(atPath: bundledDataPath, toPath: (fullPath?.path)!)","        }","        return fullPath!","    }","}","","    ","struct OrderCell: View {","    var coffee: Coffee","    var body: some View {","        NavigationLink(destination: CoffeeDetail(coffee: coffee)) {","            HStack {","                Image(coffee.thumb)","                    .cornerRadius(8)","                    .padding(.init(top: 0, leading: -10, bottom: 0, trailing: 0))","                VStack(alignment: .leading) {","                    Text(coffee.name)","                    Text(coffee.size + \" \" + coffee.milk + \" milk \" + coffee.type)","                        .font(.subheadline)","                }","            }","        }","    }","}","","struct OrderCompleteCell: View {","    var coffee: Coffee","    var body: some View {","        NavigationLink(destination: CoffeeDetail(coffee: coffee)) {","            HStack {","                Image(coffee.thumb)","                    .cornerRadius(8)","                    .padding(.init(top: 0, leading: -10, bottom: 0, trailing: 0))","                VStack(alignment: .leading) {","                    Text(coffee.name)","                    Text(coffee.size + \" \" + coffee.milk + \" \" + coffee.type)","                        .font(.subheadline)","                }","                Spacer()","                Image(systemName: \"checkmark.rectangle.fill\")","                    .resizable()","                    .aspectRatio(contentMode: .fit)","                    .foregroundColor(.green)","                    .frame(width: 40.0, height: 30.0)","            }","        }.deleteDisabled(true)","    }","}","","struct ContentView_Previews: PreviewProvider {","    static var previews: some View {","        ContentView(store: testStore)","    }","}","","struct AddButton<Destination : View>: View {","    var destination:  Destination","    var body: some View {","        NavigationLink(destination: self.destination) {","            Image(systemName: \"plus.circle.fill\")","                .resizable()","                .aspectRatio(contentMode: .fit)","                .frame(width: 30.0, height: 30.0)","        }","    }","}"],"fileName":"ContentView.swift","identifier":"privacy_04.swift","type":"file","fileType":"swift","highlights":[{"line":5}]},"doc://MyTutorial/tutorials/MyTutorial/Tutorial1#Get-the-student-materials":{"role":"pseudoSymbol","title":"Get the student materials","abstract":[{"type":"text","text":"You’re invited to learn about secure app development in SwiftUI using Xcode. These tutorials will cover:"}],"identifier":"doc:\/\/MyTutorial\/tutorials\/MyTutorial\/Tutorial1#Get-the-student-materials","kind":"section","type":"section","url":"\/tutorials\/mytutorial\/tutorial1#Get-the-student-materials"},"privacy_05.swift":{"syntax":"swift","content":["import SwiftUI","","struct ContentView: View {","    @ObservedObject var store: CoffeeStore","    @EnvironmentObject var blindsup: BlindsStore","    ","    var body: some View {","        if blindsup.blindsup {","            Blinds()","        }","        else {","            NavigationView {","                List{","                    ForEach(store.coffees)  { coffee in","                        if coffee.isReady == \"Y\" {","                            OrderCompleteCell(coffee: coffee)","                        }","                        else {","                            OrderCell(coffee: coffee)","                        }","                    }","                    HStack {","                        Spacer()","                        Text(\"\\(store.coffees.count) coffee orders\")","                            .foregroundColor(.secondary)","                        Spacer()","                    }","                }","                .navigationTitle(\"Coffees\")","                .navigationBarItems(trailing: HStack {","                    AddButton(destination: NewCoffee(store: store)) } )","            }","            .onAppear(perform: {","                    self.fetchNewData()","            })","        }","    }","    ","    func loadOrders() {","        \/\/Coffee(name: \"Pat\", milk: \"Full\", sugar: 1, isReady: \"N\", price: 4.5, type: \"Flat White\", size: \"Large\", created: Date()),","        if let data = NSDictionary(contentsOfFile: dataFileURL().path),","            let orderarray = data[\"orders\"]! as? [[String: AnyObject]] {","            \/\/clear out old orders:","            store.coffees.removeAll(keepingCapacity: true)","            for anorder in orderarray {","                store.coffees.append(Coffee(name: anorder[\"name\"] as! String, milk: anorder[\"milk\"] as! String, sugar: anorder[\"sugar\"] as! Int, isReady: anorder[\"isReady\"] as! String, price: anorder[\"price\"] as! Double, type: anorder[\"type\"] as! String, size: anorder[\"size\"] as! String, created: anorder[\"tstamp\"] as! Date))","            }","        }","    }","","    func fetchNewData() {","        if let url = NSURL(string: \"https:\/\/consultants.apple.com\/au\/ttanz\/orders.plist\") {","            let session = URLSession(configuration: URLSessionConfiguration.ephemeral)","            let task = session.dataTask(with: url as URL, completionHandler: { (data, response, error) -> Void in","                if error != nil {","                    print(\"error: \\(error!.localizedDescription))\")","                }","                else if data != nil {","                    print(\"new download successful\")","                    if let data = data {","                        do {","                            try data.write(to: self.dataFileURL())","                            print(\"wrote file to dataFileURL\")","                            DispatchQueue.main.async {","                                self.loadOrders()","                            }","                        } catch { print(\"this did not work\") }","                    }","                    DispatchQueue.main.async { self.loadOrders() }","                }","            })","            task.resume()","        }","        else {","            print(\"Unable to create NSURL\")","        }","    }","    ","    func dataFileURL() -> URL {","        let fm = FileManager.default","        let localFilePath = fm.urls(for: .documentDirectory, in: .userDomainMask).first","        let fullPath = localFilePath?.appendingPathComponent(\"orders.plist\")","        ","        if !fm.fileExists(atPath: fullPath!.absoluteURL.path) {","            print(\"No downloaded orders.plist file found, so copying included bundle\")","            let bundledDataPath = Bundle.main.path(forResource: \"orders\", ofType: \"plist\")!","            try! fm.copyItem(atPath: bundledDataPath, toPath: (fullPath?.path)!)","        }","        return fullPath!","    }","}","","    ","struct OrderCell: View {","    var coffee: Coffee","    var body: some View {","        NavigationLink(destination: CoffeeDetail(coffee: coffee)) {","            HStack {","                Image(coffee.thumb)","                    .cornerRadius(8)","                    .padding(.init(top: 0, leading: -10, bottom: 0, trailing: 0))","                VStack(alignment: .leading) {","                    Text(coffee.name)","                    Text(coffee.size + \" \" + coffee.milk + \" milk \" + coffee.type)","                        .font(.subheadline)","                }","            }","        }","    }","}","","struct OrderCompleteCell: View {","    var coffee: Coffee","    var body: some View {","        NavigationLink(destination: CoffeeDetail(coffee: coffee)) {","            HStack {","                Image(coffee.thumb)","                    .cornerRadius(8)","                    .padding(.init(top: 0, leading: -10, bottom: 0, trailing: 0))","                VStack(alignment: .leading) {","                    Text(coffee.name)","                    Text(coffee.size + \" \" + coffee.milk + \" \" + coffee.type)","                        .font(.subheadline)","                }","                Spacer()","                Image(systemName: \"checkmark.rectangle.fill\")","                    .resizable()","                    .aspectRatio(contentMode: .fit)","                    .foregroundColor(.green)","                    .frame(width: 40.0, height: 30.0)","            }","        }.deleteDisabled(true)","    }","}","","struct ContentView_Previews: PreviewProvider {","    static var previews: some View {","        ContentView(store: testStore)","    }","}","","struct AddButton<Destination : View>: View {","    var destination:  Destination","    var body: some View {","        NavigationLink(destination: self.destination) {","            Image(systemName: \"plus.circle.fill\")","                .resizable()","                .aspectRatio(contentMode: .fit)","                .frame(width: 30.0, height: 30.0)","        }","    }","}"],"fileName":"ContentView.swift","identifier":"privacy_05.swift","type":"file","fileType":"swift","highlights":[{"line":8},{"line":9},{"line":10},{"line":11},{"line":12},{"line":13},{"line":14},{"line":15},{"line":16},{"line":17},{"line":18},{"line":19},{"line":20},{"line":22},{"line":23},{"line":24},{"line":25},{"line":26},{"line":29},{"line":30},{"line":31},{"line":33},{"line":34},{"line":35}]},"privacy_03.swift":{"syntax":"swift","content":["import SwiftUI","","struct ContentView: View {","    @ObservedObject var store: CoffeeStore","    ","    var body: some View {","        NavigationView {","            List{","                ForEach(store.coffees)  { coffee in","                    if coffee.isReady == \"Y\" {","                        OrderCompleteCell(coffee: coffee)","                    }","                    else {","                        OrderCell(coffee: coffee)","                    }","                }","                HStack {","                    Spacer()","                    Text(\"\\(store.coffees.count) coffee orders\")","                        .foregroundColor(.secondary)","                    Spacer()","                }","            }","            .navigationTitle(\"Coffees\")","            .navigationBarItems(trailing: HStack { AddButton(destination: NewCoffee(store: store)) } )","        }","        .onAppear(perform: {","                self.fetchNewData()","        })","    }","    ","    func loadOrders() {","        \/\/Coffee(name: \"Pat\", milk: \"Full\", sugar: 1, isReady: \"N\", price: 4.5, type: \"Flat White\", size: \"Large\", created: Date()),","        if let data = NSDictionary(contentsOfFile: dataFileURL().path),","            let orderarray = data[\"orders\"]! as? [[String: AnyObject]] {","            \/\/clear out old orders:","            store.coffees.removeAll(keepingCapacity: true)","            for anorder in orderarray {","                store.coffees.append(Coffee(name: anorder[\"name\"] as! String, milk: anorder[\"milk\"] as! String, sugar: anorder[\"sugar\"] as! Int, isReady: anorder[\"isReady\"] as! String, price: anorder[\"price\"] as! Double, type: anorder[\"type\"] as! String, size: anorder[\"size\"] as! String, created: anorder[\"tstamp\"] as! Date))","            }","        }","    }","","    func fetchNewData() {","        if let url = NSURL(string: \"https:\/\/consultants.apple.com\/au\/ttanz\/orders.plist\") {","            let session = URLSession(configuration: URLSessionConfiguration.ephemeral)","            let task = session.dataTask(with: url as URL, completionHandler: { (data, response, error) -> Void in","                if error != nil {","                    print(\"error: \\(error!.localizedDescription))\")","                }","                else if data != nil {","                    print(\"new download successful\")","                    if let data = data {","                        do {","                            try data.write(to: self.dataFileURL())","                            print(\"wrote file to dataFileURL\")","                            DispatchQueue.main.async {","                                self.loadOrders()","                            }","                        } catch { print(\"this did not work\") }","                    }","                    DispatchQueue.main.async { self.loadOrders() }","                }","            })","            task.resume()","        }","        else {","            print(\"Unable to create NSURL\")","        }","    }","    ","    func dataFileURL() -> URL {","        let fm = FileManager.default","        let localFilePath = fm.urls(for: .documentDirectory, in: .userDomainMask).first","        let fullPath = localFilePath?.appendingPathComponent(\"orders.plist\")","        ","        if !fm.fileExists(atPath: fullPath!.absoluteURL.path) {","            print(\"No downloaded orders.plist file found, so copying included bundle\")","            let bundledDataPath = Bundle.main.path(forResource: \"orders\", ofType: \"plist\")!","            try! fm.copyItem(atPath: bundledDataPath, toPath: (fullPath?.path)!)","        }","        return fullPath!","    }","}","","    ","struct OrderCell: View {","    var coffee: Coffee","    var body: some View {","        NavigationLink(destination: CoffeeDetail(coffee: coffee)) {","            HStack {","                Image(coffee.thumb)","                    .cornerRadius(8)","                    .padding(.init(top: 0, leading: -10, bottom: 0, trailing: 0))","                VStack(alignment: .leading) {","                    Text(coffee.name)","                    Text(coffee.size + \" \" + coffee.milk + \" milk \" + coffee.type)","                        .font(.subheadline)","                }","            }","        }","    }","}","","struct OrderCompleteCell: View {","    var coffee: Coffee","    var body: some View {","        NavigationLink(destination: CoffeeDetail(coffee: coffee)) {","            HStack {","                Image(coffee.thumb)","                    .cornerRadius(8)","                    .padding(.init(top: 0, leading: -10, bottom: 0, trailing: 0))","                VStack(alignment: .leading) {","                    Text(coffee.name)","                    Text(coffee.size + \" \" + coffee.milk + \" \" + coffee.type)","                        .font(.subheadline)","                }","                Spacer()","                Image(systemName: \"checkmark.rectangle.fill\")","                    .resizable()","                    .aspectRatio(contentMode: .fit)","                    .foregroundColor(.green)","                    .frame(width: 40.0, height: 30.0)","            }","        }.deleteDisabled(true)","    }","}","","struct ContentView_Previews: PreviewProvider {","    static var previews: some View {","        ContentView(store: testStore)","    }","}","","struct AddButton<Destination : View>: View {","    var destination:  Destination","    var body: some View {","        NavigationLink(destination: self.destination) {","            Image(systemName: \"plus.circle.fill\")","                .resizable()","                .aspectRatio(contentMode: .fit)","                .frame(width: 30.0, height: 30.0)","        }","    }","}"],"fileName":"ContentView.swift","identifier":"privacy_03.swift","type":"file","fileType":"swift","highlights":[]}}}